-# External height
- graph_max_height     = local_assigns.has_key?(:height) ? height : 290
- show_area_labels     = local_assigns.has_key?(:area_labels) ? area_labels : true
- custom_css_class     = local_assigns.has_key?(:custom_class) ? custom_class : nil
- graph_max_amount     = local_assigns.has_key?(:max_amount) ? max_amount : Scenario::MaxAmount
-# Don't bother with this
- current_graph_height = scenario.total_amount / graph_max_amount * graph_max_height;

%table.graph_common.graph_shaded
  %tr
    %td.total_amount{:colspan => 2}      
      %h4 Mix #{scenario.year || 2025}
      &euro;
      %span= number_with_precision(scenario.total_amount / 1_000_000_000, :precision => 1, :separator => ".")
      Miljard
  %tr
    %td.carriers
      .graph
        - scenario.carriers.each_pair do |key, v|
          - height = v[:ratio] * current_graph_height
          .carrier{:class => key, :style => "height: #{height}px"}
            .label= v[:label] if show_area_labels && height > 8
    %td.money
      .background
        .coins{:style => "height: #{current_graph_height + 6}px"}
